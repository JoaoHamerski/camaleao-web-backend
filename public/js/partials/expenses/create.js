(()=>{function e(){var e=0;return $("[name*=value]").each((function(){e+=+sanitizeMoney($(this).val())})),e}applyCleave($("[name*=value]"),cleaveValueBRL),applyCleave($("[name*=date]"),cleaveDate),applyCleave($("[name=all_date]"),cleaveDate);var t=document.querySelector("#formExpenses");new MutationObserver((function(e){applyCleave($("[name*=value]").last(),cleaveValueBRL),applyCleave($("[name*=date]").last(),cleaveDate),""!==$("[name=all_date]").val().trim()&&$("[name*=date]").last().val($("[name=all_date]").val())})).observe(t,{attributes:!0,childList:!0,characterData:!0}),$("#btnNewExpense").on("click",(function(e){e.preventDefault(),$btn=$(this),loadingBtn($(this),!0);var t=$(".form-inline-wrapper").last().attr("data-index");t=isNaN(t)?0:t,axios.get(getLocationURL()+"/get-inline-form",{params:{index:+t+1}}).then((function(e){$("#btnNewExpense").parent().before(e.data.view)})).catch((function(e){})).then((function(){loadingBtn($btn,!1)}))})),$(document).on("input","input[type=file]",(function(){var e=$(this)[0].files||null,t=[];e.length>0?(Object.entries(e).forEach((function(e){t.push(e[1].name)})),$(this).next(".custom-file-label").html(t.reverse().join(", "))):$(this).next(".custom-file-label").html("Comprovante")})),$("#formExpenses").on("input","[name*=value]",(function(t){sanitizeMoney($(this).val()),e();var n=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"});$("#totalValue").text(n.format(e()))})),$("[name=all_date]").on("input focus",(function(){$("[name*=date]").val($(this).val())})),$("#formExpenses").on("click",".btn-delete",(function(e){e.preventDefault(),$(this).closest(".form-inline-wrapper").remove()})),$('#formExpenses button[type="submit"]').on("click",(function(e){e.preventDefault();var t=new FormData(document.querySelector("#formExpenses")),n=$(this);loadingBtn(n,!0),axios.post(getLocationURL(),t).then((function(e){window.location=e.data.redirect})).catch((function(e){console.log(e.response),loadingBtn(n,!1),dispatchErrorMessages(e.response.data.errors)}))})),$(document).on("change","[name*=expense_type_id]",(function(e){var t=$(this).parents(".form-inline-wrapper").attr("data-index"),n='\n\t\t<div class="form-row">\n\t\t\t<div class="form-group col col-md-4">\n\t\t\t\t<input type="text" class="form-control" name="employee_name['.concat(t,']" placeholder="Nome do funcionário...">\n\t\t\t</div>\n\t\t</div>\n\t');$('[name="expense_type_id['.concat(t,']"] option:selected')).text().trim().toUpperCase()=="mão de obra".toUpperCase()?$(this).parents(".form-inline-wrapper").find(".form-row:nth-child(2)").after($(n)):$(this).parents(".form-inline-wrapper").find(".form-row:nth-child(3)").remove()}))})();